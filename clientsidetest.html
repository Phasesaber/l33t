<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Form Handling</title>
<link href="formstyle.css" rel="stylesheet" type="text/css" />
<script language="javascript" type="text/javascript">

function checkform(pform1){
var str=pform1.password.value;
var email = pform1.email.value;
var phone = pform1.phone.value;
var cleanstr = phone.replace(/[\(\)\.\-\ ]/g, '');
var err={}; 
var validemail =/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

//check required fields
//password should be minimum 4 chars but not greater than 8
if ((str.length < 4) || (str.length > 8)) {

err.message="Invalid password length"; 
err.field=pform1.password; 
}

//validate email
if(!(validemail.test(email))){
err.message="Invalid email"; 
err.field=pform1.email; 

}

//check phone number
if (isNaN(parseInt(cleanstr))) {
err.message="Invalid phone number"; 
err.field=pform1.phone; 
}

if(err.message) 
        { 
               document.getElementById('divError').innerHTML = err.message;
                err.field.focus();
                return false;        
                
        } 


return true
}
</script>

</head>
<body>
<h1>Improved Form Handling with JavaScript</h1>

<form action="" method="POST" onsubmit="return checkform(this);">

<div id="errmsgbox">

<div id="divError"></div>

</div>

<fieldset class="credentials">
<legend>Access Credentials</legend>

<table border="0">

  <tr>
    <td><label for="username" class="hover">Username</label></td>
    <td><input type="text" id="username" class="required text"/>
      <span class="style1">*</span></td>
  </tr>
  <tr>
    <td><label for="password" class="hover">Password</label></td>
    <td><input type="password" id="password" class="required text"/>
      <span class="style1">*</span><br />
      <span class="tooltip">Minimum four and maximum eight characters</span> </td>
  </tr>
  <tr>
    <td><label for="email">Email</label></td>
    <td><input type="text" id="email" class="required email text"/>
      <span class="style1">*</span></td>
  </tr>
  </table>
  </fieldset>
  <fieldset>
<legend>Other Information</legend>
  <table border="0">

  <tr>
    <td width="59"><label for="name">Name</label></td>
    <td width="207"><input type="text" id="name" class="required text"/>
      <span class="style1">*</span></td>
  </tr>
  <tr>
    <td><label for="phone">Phone</label></td>
    <td><input type="text" id="phone" class="phone text"/></td>
  </tr>
  <tr>
    
    <td colspan="2"><input type="submit" value="Submit Form" class="submit"/></td>
  </tr>
  <tr>
    <td colspan="2">* = Required Field</td>
    </tr>
</table>

</fieldset>
</form>
</body>
</html>
